(function(a,c,f){'use strict';var b=c.Modernizr,e=a('body'),d;a.DLMenu=function(b,c){this.$el=a(c),this._init(b)},a.DLMenu.defaults={animationClasses:{classin:'dl-animate-in-2',classout:'dl-animate-out-2'},onLevelClick:function(a,b){return!1},onLinkClick:function(a,b){return!1}},a.DLMenu.prototype={_init:function(c){this.options=a.extend(!0,{},a.DLMenu.defaults,c),this._config();var d={WebkitAnimation:'webkitAnimationEnd',OAnimation:'oAnimationEnd',msAnimation:'MSAnimationEnd',animation:'animationend'},e={WebkitTransition:'webkitTransitionEnd',MozTransition:'transitionend',OTransition:'oTransitionEnd',msTransition:'MSTransitionEnd',transition:'transitionend'};this.animEndEventName=d[b.prefixed('animation')]+'.dlmenu',this.transEndEventName=e[b.prefixed('transition')]+'.dlmenu',this.supportAnimations=b.cssanimations,this.supportTransitions=b.csstransitions,this._initEvents()},_config:function(){this.open=!1,this.$trigger=this.$el.children('.dl-trigger'),this.$menu=this.$el.children('ul.dl-menu'),this.$menuitems=this.$menu.find('li:not(.dl-back)'),this.$el.find('ul.sub-menu').prepend('<li class="dl-back"><a href="#"><i class="fa fa-long-arrow-left"></i></a></li>'),this.$menuitems.clone().appendTo(".dl-back").find("a").val(""),this.$back=this.$menu.find('li.dl-back')},_initEvents:function(){var b=this;jQuery(document).on('click','li.menu-item-has-children > a',function(h){var f,g,a,d,e,c;if(h.stopPropagation(),f=jQuery(this),g=f[0],a=jQuery(g.parentNode),d=a.children('ul.sub-menu'),d.length>0)return e=d.clone().css('opacity',0).insertAfter(b.$submenu),c=function(){b.$menu.off(b.animEndEventName).removeClass(b.options.animationClasses.classout).addClass('dl-subview'),a.addClass('dl-subviewopen').parents('.dl-subviewopen:first').removeClass('dl-subviewopen').addClass('dl-subview'),e.remove()},setTimeout(function(){e.addClass(b.options.animationClasses.classin),b.$menu.addClass(b.options.animationClasses.classout),b.supportAnimations?b.$menu.on(b.animEndEventName,c):c.call(),b.options.onLevelClick(a,a.children('a:first').text())}),!1;b.options.onLinkClick(a,h)}),this.$back.on('click.dlmenu',function(h){var c=a(this),d=c.parents('ul.sub-menu:first'),g=d.parent(),e=d.clone().insertAfter(b.$submenu),f=function(){b.$menu.off(b.animEndEventName).removeClass(b.options.animationClasses.classin),e.remove()};return setTimeout(function(){e.addClass(b.options.animationClasses.classout),b.$menu.addClass(b.options.animationClasses.classin),b.supportAnimations?b.$menu.on(b.animEndEventName,f):f.call(),g.removeClass('dl-subviewopen');var a=c.parents('.dl-subview:first');a.is('li')&&a.addClass('dl-subviewopen'),a.removeClass('dl-subview')}),!1})},closeMenu:function(){this.open&&this._closeMenu()},_closeMenu:function(){var a=this,b=function(){a.$menu.off(a.transEndEventName),a._resetMenu()};this.$menu.removeClass('dl-menuopen'),this.$menu.addClass('dl-menu-toggle'),this.$trigger.removeClass('dl-active'),this.supportTransitions?this.$menu.on(this.transEndEventName,b):b.call(),this.open=!1},openMenu:function(){this.open||this._openMenu()},_openMenu:function(){var b=this;e.off('click').on('click.dlmenu',function(){b._closeMenu()}),this.$menu.addClass('dl-menuopen dl-menu-toggle').on(this.transEndEventName,function(){a(this).removeClass('dl-menu-toggle')}),this.$trigger.addClass('dl-active'),this.open=!0},_resetMenu:function(){this.$menu.removeClass('dl-subview'),this.$menuitems.removeClass('dl-subview dl-subviewopen')}},d=function(a){c.console&&c.console.error(a)},a.fn.dlmenu=function(b){if(typeof b=='string'){var c=Array.prototype.slice.call(arguments,1);this.each(function(){var e=a.data(this,'dlmenu');if(!e){d("cannot call methods on dlmenu prior to initialization; attempted to call method '"+b+"'");return}if(!a.isFunction(e[b])||b.charAt(0)==="_"){d("no such method '"+b+"' for dlmenu instance");return}e[b].apply(e,c)})}else this.each(function(){var c=a.data(this,'dlmenu');c?c._init():c=a.data(this,'dlmenu',new a.DLMenu(b,this))});return this}})(jQuery,window)